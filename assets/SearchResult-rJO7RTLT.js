import{g as Y,u as K,h as Z,i as X,j as ee,t as te,k as ae,l as L,m as b,n as e,p as le,q as ie,s as se,R as F,v as re,x as oe,y as ce,z as ne,A as ue,B as j,C as T,D as de,E as he,F as me,G as ge,L as ve,H as ye,I as Ee,J as pe,K as $,M as Ae,N as S}from"./app-CN1e8mfj.js";const Be=["/","/intro.html","/coding/AQS.html","/coding/Authorization.html","/coding/Elasticsearch.html","/coding/Guava.html","/coding/Guide-RPC.html","/coding/Hive-SQL.html","/coding/JUC.html","/coding/JVM-GC.html","/coding/JVM-reference-type.html","/coding/JVM-runtime-memory.html","/coding/JVM.html","/coding/Java_base.html","/coding/LockSupport.html","/coding/Logging.html","/coding/MQ_Abstract.html","/coding/MQ_Kafka.html","/coding/MyBatis.html","/coding/MySQL-DDL.html","/coding/MySQL-Lock.html","/coding/MySQL01.html","/coding/MySQL02.html","/coding/NIO.html","/coding/Netty01.html","/coding/Netty02.html","/coding/","/coding/Redis01.html","/coding/Redis02.html","/coding/Redis03.html","/coding/Redis04.html","/coding/Shred_Algorithm.html","/coding/SmallSpring.html","/coding/SpringTransaction.html","/coding/Synchronized.html","/coding/Thread.html","/coding/ThreadPoolExecutor.html","/coding/Thrift.html","/coding/Unsafe.html","/coding/Windows-WSL-MySQL.html","/coding/Zookeeper.html","/coding/bigdata-hadoop.html","/coding/cache-migration.html","/coding/code-review.html","/coding/ddd.html","/coding/distributed-cache.html","/coding/distributed-transaction.html","/coding/gateway.html","/coding/git-pro.html","/coding/interview-java.html","/coding/java-stream.html","/coding/java-threadlocal.html","/coding/leetcode-bitcalc.html","/coding/leetcode-permutation.html","/coding/linux-cmd.html","/coding/mock-test.html","/life/AirBiz.html","/life/","/life/arabs-history.html","/life/beijing-intern.html","/life/blog-actions.html","/life/cycling.html","/life/first-camera.html","/life/movie-guide.html","/life/summary_2023.html","/life/summary_2024.html","/life/travel-tibet.html","/life/webrtc-study.html","/life/windows-dash.html","/life/youtube-dl-ffmpeg.html","/404.html","/category/","/category/java/","/category/%E5%88%86%E5%B8%83%E5%BC%8F/","/category/%E5%B7%A5%E5%85%B7/","/category/%E5%A4%A7%E6%95%B0%E6%8D%AE/","/category/%E6%95%B0%E6%8D%AE%E5%BA%93/","/category/%E7%BC%93%E5%AD%98/","/category/%E7%AE%97%E6%B3%95/","/category/%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/","/category/%E5%BE%AE%E6%9C%8D%E5%8A%A1/","/category/%E6%B5%8B%E8%AF%95/","/category/%E5%B7%A5%E4%BD%9C/","/category/%E9%9A%8F%E7%AC%94/","/category/life/","/category/%E5%8D%9A%E5%AE%A2/","/tag/","/tag/%E5%B9%B6%E5%8F%91/","/tag/%E9%89%B4%E6%9D%83/","/tag/es/","/tag/guava/","/tag/rpc/","/tag/hadoop/","/tag/hive/","/tag/jvm/","/tag/%E6%97%A5%E5%BF%97/","/tag/mq/","/tag/mybatis/","/tag/mysql/","/tag/nio/","/tag/netty/","/tag/redis/","/tag/%E4%BA%8B%E5%8A%A1/","/tag/zookeeper/","/tag/%E7%BC%93%E5%AD%98/","/tag/%E7%BD%91%E5%85%B3/","/tag/git/","/tag/%E9%9D%A2%E8%AF%95/","/tag/%E6%B5%81/","/tag/leetcode/","/tag/linux/","/tag/mock/","/tag/%E6%9C%BA%E7%A5%A8/","/tag/%E5%AE%97%E6%95%99/","/tag/%E5%AE%9E%E4%B9%A0/","/tag/%E6%8A%98%E8%85%BE/","/tag/%E8%87%AA%E8%A1%8C%E8%BD%A6/","/tag/%E6%91%84%E5%BD%B1/","/tag/%E7%94%B5%E5%BD%B1/","/tag/%E5%B9%B4%E7%BB%88%E6%80%BB%E7%BB%93/","/tag/%E6%97%85%E8%A1%8C/","/tag/webrtc/","/tag/%E8%A7%86%E9%A2%91%E6%B5%81/","/article/","/star/","/timeline/"],fe="SLIMSEARCH_QUERY_HISTORY",E=$(fe,[]),be=()=>{const{queryHistoryCount:i}=S;return{enabled:i>0,queryHistories:E,addQueryHistory:c=>{E.value=Array.from(new Set([c,...E.value.slice(0,i-1)]))},removeQueryHistory:c=>{E.value=[...E.value.slice(0,c),...E.value.slice(c+1)]}}},R=i=>Be[i.id]+("anchor"in i?`#${i.anchor}`:""),Se="SLIMSEARCH_RESULT_HISTORY",{resultHistoryCount:_}=S,p=$(Se,[]),ke=()=>({enabled:_>0,resultHistories:p,addResultHistory:o=>{{const c={link:R(o),display:o.display};"header"in o&&(c.header=o.header),p.value=[c,...p.value.slice(0,_-1)]}},removeResultHistory:o=>{p.value=[...p.value.slice(0,o),...p.value.slice(o+1)]}}),Qe=i=>{const{page:o,routeLocale:c}=de(),k=he(),s=L(0),A=b(()=>s.value>0),d=me([]);return ge(()=>{const{search:Q,terminate:g}=ve(),B=Ee(v=>{const{resultsFilter:C=l=>l,querySplitter:y,suggestionsFilter:x,...r}=k.value;v?(s.value+=1,Q(v,c.value,r).then(l=>C(l,v,c.value,o.value)).then(l=>{s.value-=1,d.value=l}).catch(l=>{console.warn(l),s.value-=1,s.value||(d.value=[])})):d.value=[]},S.searchDelay-S.suggestDelay,{maxWait:5e3});ye([i,c],([v])=>B(v.join(" "))),pe(()=>{g()})}),{isSearching:A,results:d}};var De=Y({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(i,{emit:o}){const c=K(),k=Z(),s=X(ee),{addQueryHistory:A,queryHistories:d,removeQueryHistory:Q}=be(),{resultHistories:g,addResultHistory:B,removeResultHistory:v}=ke(),C=te(i,"queries"),{results:y,isSearching:x}=Qe(C),r=ae({isQuery:!0,index:0}),l=L(0),h=L(0),q=b(()=>d.value.length>0||g.value.length>0),D=b(()=>y.value.length>0),H=b(()=>y.value[l.value]||null),I=()=>{const{isQuery:t,index:a}=r;a===0?(r.isQuery=!t,r.index=t?g.value.length-1:d.value.length-1):r.index=a-1},J=()=>{const{isQuery:t,index:a}=r;a===(t?d.value.length-1:g.value.length-1)?(r.isQuery=!t,r.index=0):r.index=a+1},U=()=>{l.value=l.value>0?l.value-1:y.value.length-1,h.value=H.value.contents.length-1},z=()=>{l.value=l.value<y.value.length-1?l.value+1:0,h.value=0},P=()=>{h.value<H.value.contents.length-1?h.value+=1:z()},V=()=>{h.value>0?h.value-=1:U()},w=t=>t.map(a=>Ae(a)?a:e(a[0],a[1])),G=t=>{if(t.type==="customField"){const a=ne[t.index]||"$content",[m,n=""]=ue(a)?a[k.value].split("$content"):a.split("$content");return t.display.map(u=>e("div",w([m,...u,n])))}return t.display.map(a=>e("div",w(a)))},f=()=>{l.value=0,h.value=0,o("updateQuery",""),o("close")},N=()=>e("div",{class:"slimsearch-records"},e("div",{class:"slimsearch-record"},[e("div",{class:"slimsearch-record-title"},s.value.queryHistory),e("ul",{class:"slimsearch-record-contents",role:"listbox"},d.value.map((t,a)=>{const m=r.isQuery&&r.index===a;return e("li",{class:["slimsearch-record-matches",{active:m}],role:"option","aria-selected":m,onClick:()=>{o("updateQuery",t)}},e("div",[e(j,{class:"slimsearch-record-type"}),e("div",{class:"slimsearch-record-content"},t),e("button",{type:"button",class:"slimsearch-remove-icon",title:s.value.remove,"aria-label":s.value.remove,innerHTML:T,onClick:n=>{n.preventDefault(),n.stopPropagation(),Q(a)}})]))}))])),O=()=>e("ul",{class:"slimsearch-records"},e("li",{class:"slimsearch-record"},[e("div",{class:"slimsearch-record-title"},s.value.resultHistory),e("ul",{class:"slimsearch-record-contents",role:"listbox"},g.value.map((t,a)=>{const m=!r.isQuery&&r.index===a;return e("li",{class:["slimsearch-record-matches",{active:m}],role:"option","aria-selected":m},e(F,{to:t.link,onClick:()=>{f()}},()=>[e(j,{class:"slimsearch-record-type"}),e("div",{class:"slimsearch-record-content"},[t.header?e("div",{class:"slimsearch-record-content-header"},t.header):null,e("div",t.display.map(n=>w(n)).flat())]),e("button",{type:"button",class:"slimsearch-remove-icon",title:s.value.remove,"aria-label":s.value.remove,innerHTML:T,onClick:n=>{n.preventDefault(),n.stopPropagation(),v(a)}})]))}))]));return le("keydown",t=>{if(i.isFocusing){if(D.value){if(t.key==="ArrowUp")V();else if(t.key==="ArrowDown")P();else if(t.key==="Enter"){const a=H.value.contents[h.value];A(i.queries.join(" ")),B(a),c.push(R(a)),f()}}else if(t.key==="ArrowUp")I();else if(t.key==="ArrowDown")J();else if(t.key==="Enter"){const{index:a}=r;r.isQuery?(t.preventDefault(),o("updateQuery",d.value[a])):(c.push(g.value[a].link),f())}}}),ie([l,h],()=>{document.querySelector(".slimsearch-record.active .slimsearch-record-matches.active")?.scrollIntoView(!1)},{flush:"post"}),()=>e("div",{id:"slimsearch-results",class:["slimsearch-result-wrapper",{empty:i.queries.length?!D.value:!q.value}]},i.queries.length?x.value?e(se,{hint:s.value.searching}):D.value?e("div",{class:"slimsearch-records",role:"listbox","aria-labeledby":"slimsearch-label"},y.value.map(({title:t,contents:a},m)=>{const n=l.value===m;return e("div",{class:["slimsearch-record",{active:n}],role:"group","aria-selected":n},[e("div",{class:"slimsearch-record-title"},t||s.value.defaultTitle),e("ul",{class:"slimsearch-record-contents"},a.map((u,W)=>{const M=n&&h.value===W;return e("li",{class:["slimsearch-record-matches",{active:M}],role:"option","aria-selected":M},e(F,{to:R(u),onClick:()=>{A(i.queries.join(" ")),B(u),f()}},()=>[u.type==="text"?null:e(u.type==="title"?re:u.type==="heading"?oe:ce,{class:"slimsearch-record-type"}),e("div",{class:"slimsearch-record-content"},[u.type==="text"&&u.header?e("div",{class:"slimsearch-record-content-header"},u.header):null,e("div",G(u))])]))}))])})):s.value.emptyResult:q.value?[N(),O()]:s.value.emptyHistory)}});export{De as default};
