import{g as Z,u as X,h as P,i as ee,P as te,t as ae,j as le,k as b,l as R,m as a,n as ie,p as J,q as se,R as M,s as re,v as oe,x as ne,y as ce,z as ue,A as _,B as T,C as de,D as ge,E as he,F as me,G as ve,H as ye,I as pe,J as $,K as Ee,L as S}from"./app-CHBNztBQ.js";const Ae=["/","/intro.html","/coding/AQS.html","/coding/Authorization.html","/coding/Elasticsearch.html","/coding/Guava.html","/coding/Guide-RPC.html","/coding/Hive-SQL.html","/coding/JUC.html","/coding/JVM-GC.html","/coding/JVM-reference-type.html","/coding/JVM-runtime-memory.html","/coding/JVM.html","/coding/Java_base.html","/coding/LockSupport.html","/coding/Logging.html","/coding/MQ_Abstract.html","/coding/MQ_Kafka.html","/coding/MyBatis.html","/coding/MySQL-Lock.html","/coding/MySQL01.html","/coding/MySQL02.html","/coding/NIO.html","/coding/Netty01.html","/coding/Netty02.html","/coding/","/coding/Redis01.html","/coding/Redis02.html","/coding/Redis03.html","/coding/Redis04.html","/coding/Shred_Algorithm.html","/coding/SmallSpring.html","/coding/SpringTransaction.html","/coding/Stream.html","/coding/Synchronized.html","/coding/Thread.html","/coding/ThreadPoolExecutor.html","/coding/Thrift.html","/coding/Unsafe.html","/coding/Windows-WSL-MySQL.html","/coding/Zookeeper.html","/coding/bigdata-hadoop.html","/coding/cache-migration.html","/coding/code-review.html","/coding/distributed-cache.html","/coding/distributed-transaction.html","/coding/gateway.html","/coding/git-pro.html","/coding/interview-java.html","/coding/leetcode-bitcalc.html","/coding/leetcode-permutation.html","/coding/linux-cmd.html","/coding/mock-test.html","/life/AirBiz.html","/life/","/life/arabs-history.html","/life/beijing-intern.html","/life/blog-actions.html","/life/cycling.html","/life/first-camera.html","/life/movie-guide.html","/life/summary_2023.html","/life/summary_2024.html","/life/travel-tibet.html","/life/webrtc-study.html","/life/windows-dash.html","/life/youtube-dl-ffmpeg.html","/404.html","/category/","/category/java/","/category/%E5%88%86%E5%B8%83%E5%BC%8F/","/category/%E5%B7%A5%E5%85%B7/","/category/%E5%A4%A7%E6%95%B0%E6%8D%AE/","/category/%E6%95%B0%E6%8D%AE%E5%BA%93/","/category/%E7%BC%93%E5%AD%98/","/category/%E7%AE%97%E6%B3%95/","/category/%E5%BE%AE%E6%9C%8D%E5%8A%A1/","/category/%E6%B5%8B%E8%AF%95/","/category/%E5%B7%A5%E4%BD%9C/","/category/%E9%9A%8F%E7%AC%94/","/category/life/","/category/%E5%8D%9A%E5%AE%A2/","/tag/","/tag/%E5%B9%B6%E5%8F%91/","/tag/%E9%89%B4%E6%9D%83/","/tag/es/","/tag/guava/","/tag/rpc/","/tag/hadoop/","/tag/hive/","/tag/jvm/","/tag/%E6%97%A5%E5%BF%97/","/tag/mq/","/tag/mybatis/","/tag/mysql/","/tag/nio/","/tag/netty/","/tag/redis/","/tag/%E4%BA%8B%E5%8A%A1/","/tag/%E6%B5%81/","/tag/zookeeper/","/tag/%E7%BC%93%E5%AD%98/","/tag/%E7%BD%91%E5%85%B3/","/tag/git/","/tag/%E9%9D%A2%E8%AF%95/","/tag/leetcode/","/tag/linux/","/tag/mock/","/tag/%E6%9C%BA%E7%A5%A8/","/tag/%E5%AE%97%E6%95%99/","/tag/%E5%AE%9E%E4%B9%A0/","/tag/%E6%8A%98%E8%85%BE/","/tag/%E8%87%AA%E8%A1%8C%E8%BD%A6/","/tag/%E6%91%84%E5%BD%B1/","/tag/%E7%94%B5%E5%BD%B1/","/tag/%E5%B9%B4%E7%BB%88%E6%80%BB%E7%BB%93/","/tag/%E6%97%85%E8%A1%8C/","/tag/webrtc/","/tag/%E8%A7%86%E9%A2%91%E6%B5%81/","/article/","/star/","/timeline/"],fe="SEARCH_PRO_QUERY_HISTORY",y=$(fe,[]),Be=()=>{const{queryHistoryCount:i}=S;return{enabled:i>0,queryHistory:y,addQueryHistory:o=>{y.value=Array.from(new Set([o,...y.value.slice(0,i-1)]))},removeQueryHistory:o=>{y.value=[...y.value.slice(0,o),...y.value.slice(o+1)]}}},L=i=>Ae[i.id]+("anchor"in i?`#${i.anchor}`:""),ke="SEARCH_PRO_RESULT_HISTORY",{resultHistoryCount:j}=S,p=$(ke,[]),Re=()=>({enabled:j>0,resultHistory:p,addResultHistory:s=>{{const o={link:L(s),display:s.display};"header"in s&&(o.header=s.header),p.value=[o,...p.value.slice(0,j-1)]}},removeResultHistory:s=>{p.value=[...p.value.slice(0,s),...p.value.slice(s+1)]}}),Se=i=>{const s=de(),o=P(),H=ge(),n=b(0),E=R(()=>n.value>0),g=he([]);return me(()=>{const{search:Q,terminate:h}=ve(),A=ye(v=>{const f=v.join(" "),{searchFilter:m=l=>l,splitWord:x,suggestionsFilter:r,...c}=s.value;f?(n.value+=1,Q(v.join(" "),o.value,c).then(l=>m(l,f,o.value,H.value)).then(l=>{n.value-=1,g.value=l}).catch(l=>{console.warn(l),n.value-=1,n.value||(g.value=[])})):g.value=[]},S.searchDelay-S.suggestDelay);J([i,o],([v])=>A(v),{immediate:!0}),pe(()=>{h()})}),{isSearching:E,results:g}};var Qe=Z({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(i,{emit:s}){const o=X(),H=P(),n=ee(te),{addQueryHistory:E,queryHistory:g,removeQueryHistory:Q}=Be(),{resultHistory:h,addResultHistory:A,removeResultHistory:v}=Re(),f=ae(i,"queries"),{results:m,isSearching:x}=Se(f),r=le({isQuery:!0,index:0}),c=b(0),l=b(0),q=R(()=>g.value.length>0||h.value.length>0),w=R(()=>m.value.length>0),C=R(()=>m.value[c.value]||null),I=()=>{const{isQuery:e,index:t}=r;t===0?(r.isQuery=!e,r.index=e?h.value.length-1:g.value.length-1):r.index=t-1},O=()=>{const{isQuery:e,index:t}=r;t===(e?g.value.length-1:h.value.length-1)?(r.isQuery=!e,r.index=0):r.index=t+1},U=()=>{c.value=c.value>0?c.value-1:m.value.length-1,l.value=C.value.contents.length-1},z=()=>{c.value=c.value<m.value.length-1?c.value+1:0,l.value=0},V=()=>{l.value<C.value.contents.length-1?l.value+=1:z()},G=()=>{l.value>0?l.value-=1:U()},D=e=>e.map(t=>Ee(t)?t:a(t[0],t[1])),N=e=>{if(e.type==="customField"){const t=ce[e.index]||"$content",[u,k=""]=ue(t)?t[H.value].split("$content"):t.split("$content");return e.display.map(d=>a("div",D([u,...d,k])))}return e.display.map(t=>a("div",D(t)))},B=()=>{c.value=0,l.value=0,s("updateQuery",""),s("close")},Y=()=>a("ul",{class:"search-pro-result-list"},a("li",{class:"search-pro-result-list-item"},[a("div",{class:"search-pro-result-title"},n.value.queryHistory),g.value.map((e,t)=>a("div",{class:["search-pro-result-item",{active:r.isQuery&&r.index===t}],onClick:()=>{s("updateQuery",e)}},[a(_,{class:"search-pro-result-type"}),a("div",{class:"search-pro-result-content"},e),a("button",{class:"search-pro-remove-icon",innerHTML:T,onClick:u=>{u.preventDefault(),u.stopPropagation(),Q(t)}})]))])),K=()=>a("ul",{class:"search-pro-result-list"},a("li",{class:"search-pro-result-list-item"},[a("div",{class:"search-pro-result-title"},n.value.resultHistory),h.value.map((e,t)=>a(M,{to:e.link,class:["search-pro-result-item",{active:!r.isQuery&&r.index===t}],onClick:()=>{B()}},()=>[a(_,{class:"search-pro-result-type"}),a("div",{class:"search-pro-result-content"},[e.header?a("div",{class:"content-header"},e.header):null,a("div",e.display.map(u=>D(u)).flat())]),a("button",{class:"search-pro-remove-icon",innerHTML:T,onClick:u=>{u.preventDefault(),u.stopPropagation(),v(t)}})]))]));return ie("keydown",e=>{if(i.isFocusing){if(w.value){if(e.key==="ArrowUp")G();else if(e.key==="ArrowDown")V();else if(e.key==="Enter"){const t=C.value.contents[l.value];E(i.queries.join(" ")),A(t),o.push(L(t)),B()}}else if(e.key==="ArrowUp")I();else if(e.key==="ArrowDown")O();else if(e.key==="Enter"){const{index:t}=r;r.isQuery?(s("updateQuery",g.value[t]),e.preventDefault()):(o.push(h.value[t].link),B())}}}),J([c,l],()=>{var e;(e=document.querySelector(".search-pro-result-list-item.active .search-pro-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>a("div",{class:["search-pro-result-wrapper",{empty:i.queries.length?!w.value:!q.value}],id:"search-pro-results"},i.queries.length?x.value?a(se,{hint:n.value.searching}):w.value?a("ul",{class:"search-pro-result-list"},m.value.map(({title:e,contents:t},u)=>{const k=c.value===u;return a("li",{class:["search-pro-result-list-item",{active:k}]},[a("div",{class:"search-pro-result-title"},e||n.value.defaultTitle),t.map((d,W)=>{const F=k&&l.value===W;return a(M,{to:L(d),class:["search-pro-result-item",{active:F,"aria-selected":F}],onClick:()=>{E(i.queries.join(" ")),A(d),B()}},()=>[d.type==="text"?null:a(d.type==="title"?re:d.type==="heading"?oe:ne,{class:"search-pro-result-type"}),a("div",{class:"search-pro-result-content"},[d.type==="text"&&d.header?a("div",{class:"content-header"},d.header):null,a("div",N(d))])])})])})):n.value.emptyResult:q.value?[Y(),K()]:n.value.emptyHistory)}});export{Qe as default};
